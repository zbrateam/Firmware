#import "MobileGestalt.h"

BOOL MGGetBoolAnswer(NSString *question);
NSObject *MGCopyAnswer(NSString *question);

@implementation MobileGestalt

- (NSDictionary *)gestaltAnswers {
    NSArray *gestaltKeys = @[
        @"3GProximityCapability",
        @"3Gvenice",
        @"64-bit",
        @"720p",
        @"AWDLCapability",
        @"ActivationProtocol",
        @"AggregateDevicePhotoZoomFactor",
        @"AggregateDeviceVideoZoomFactor",
        @"AirDropCapability",
        @"Allow32BitApps",
        @"AllowOnlyATVCPSDKApps",
        @"AllowYouTube",
        @"AllowYouTubePlugin",
        @"AppCapacityTVOS",
        @"AppStore",
        @"AudioPlaybackCapability",
        @"BacklightCapability",
        @"BasebandClass",
        @"BlueLightReductionSupported",
        @"BoardId",
        @"BuddyLanguagesAnimationRequiresOptimization",
        @"CPUSubType",
        @"CPUType",
        @"CameraHDR2Capability",
        @"CameraLiveEffectsCapability",
        @"CameraMaxBurstLength",
        @"CarrierInstallCapability",
        @"CellularTelephonyCapability",
        @"ChipID",
        @"CloudPhotoLibraryCapability",
        @"CoastlineGlowRenderingCapability",
        @"CompassType",
        @"ContinuityCapability",
        @"CoreRoutineCapability",
        @"DesenseBuild",
        @"DeviceBackGlassMaterial",
        @"DeviceBackingColor",
        @"DeviceBrand",
        @"DeviceClassNumber",
        @"DeviceColor",
        @"DeviceColorMapPolicy",
        @"DeviceCornerRadius",
        @"DeviceCoverGlassColor",
        @"DeviceCoverGlassMaterial",
        @"DeviceCoverMaterial",
        @"DeviceEnclosureColor",
        @"DeviceEnclosureMaterial",
        @"DeviceHasAggregateCamera",
        @"DeviceHousingColor",
        @"DeviceLaunchTimeLimitScale",
        @"DevicePrefers3DBuildingStrokes",
        @"DevicePrefersBuildingStrokes",
        @"DevicePrefersCheapTrafficShaders",
        @"DevicePrefersProceduralAntiAliasing",
        @"DevicePrefersTrafficAlpha",
        @"DeviceRequiresPetalOptimization",
        @"DeviceRequiresProximityAmeliorations",
        @"DeviceRequiresSoftwareBrightnessCalculations",
        @"DeviceSceneUpdateTimeLimitScale",
        @"DeviceSubBrand",
        @"DeviceSupports1080p",
        @"DeviceSupports3DImagery",
        @"DeviceSupports3DMaps",
        @"DeviceSupports4G",
        @"DeviceSupports4k",
        @"DeviceSupports720p",
        @"DeviceSupports9Pin",
        @"DeviceSupportsAOP",
        @"DeviceSupportsASTC",
        @"DeviceSupportsAdaptiveMapsUI",
        @"DeviceSupportsAlwaysListening",
        @"DeviceSupportsAlwaysOnCompass",
        @"DeviceSupportsApplePencil",
        @"DeviceSupportsAutoLowLightVideo",
        @"DeviceSupportsBatteryModuleAuthentication",
        @"DeviceSupportsBerkelium2",
        @"DeviceSupportsCCK",
        @"DeviceSupportsCameraCaptureOnTouchDown",
        @"DeviceSupportsCameraHaptics",
        @"DeviceSupportsCarIntegration",
        @"DeviceSupportsCinnamon",
        @"DeviceSupportsClosedLoopHaptics",
        @"DeviceSupportsCrudeProx",
        @"DeviceSupportsDClr",
        @"DeviceSupportsDoNotDisturbWhileDriving",
        @"DeviceSupportsELabel",
        @"DeviceSupportsEnhancedAC3",
        @"DeviceSupportsFloorCounting",
        @"DeviceSupportsHaptics",
        @"DeviceSupportsHeartHealthAlerts",
        @"DeviceSupportsHeartRateVariability",
        @"DeviceSupportsHiResBuildings",
        @"DeviceSupportsLineIn",
        @"DeviceSupportsLiquidDetection_CorrosionMitigation",
        @"DeviceSupportsLivePhotoAuto",
        @"DeviceSupportsMapsBlurredUI",
        @"DeviceSupportsNavigation",
        @"DeviceSupportsNewton",
        @"DeviceSupportsPeriodicALSUpdates",
        @"DeviceSupportsPortraitLightEffectFilters",
        @"DeviceSupportsRGB10",
        @"DeviceSupportsRaiseToSpeak",
        @"DeviceSupportsSiDP",
        @"DeviceSupportsSimplisticRoadMesh",
        @"DeviceSupportsSingleCameraPortrait",
        @"DeviceSupportsSiriSpeaks",
        @"DeviceSupportsStereoAudioRecording",
        @"DeviceSupportsStudioLightPortraitPreview",
        @"DeviceSupportsSwimmingWorkouts",
        @"DeviceSupportsTapToWake",
        @"DeviceSupportsTethering",
        @"DeviceSupportsToneMapping",
        @"DeviceSupportsUSBTypeC",
        @"DeviceSupportsWebkit",
        @"DeviceSupportsYCbCr10",
        @"DeviceVariant",
        @"DeviceVariantGuess",
        @"ExternalChargeCapability",
        @"FDRSealingStatus",
        @"FMFAllowed",
        @"FaceTimeBackCameraTemporalNoiseReductionMode",
        @"FaceTimeCameraRequiresFastSwitchOptions",
        @"FaceTimeCameraSupportsHardwareFaceDetection",
        @"FaceTimeFrontCameraTemporalNoiseReductionMode",
        @"FaceTimePhotosOptIn",
        @"FirstPartyLaunchTimeLimitScale",
        @"ForwardCameraCapability",
        @"FrontFacingCameraAutoHDRCapability",
        @"FrontFacingCameraBurstCapability",
        @"FrontFacingCameraHDRCapability",
        @"FrontFacingCameraHDROnCapability",
        @"FrontFacingCameraHFRCapability",
        @"FrontFacingCameraMaxVideoZoomFactor",
        @"FrontFacingCameraStillDurationForBurst",
        @"FrontFacingCameraVideoCapture1080pMaxFPS",
        @"FrontFacingCameraVideoCapture4kMaxFPS",
        @"FrontFacingCameraVideoCapture720pMaxFPS",
        @"H264EncoderCapability",
        @"HEVCDecoder10bitSupported",
        @"HEVCDecoder12bitSupported",
        @"HEVCDecoder8bitSupported",
        @"HEVCEncodingCapability",
        @"HasAppleNeuralEngine",
        @"HasBaseband",
        @"HasBattery",
        @"HasDaliMode",
        @"HasExtendedColorDisplay",
        @"HasIcefall",
        @"HasMesa",
        @"HasPKA",
        @"HasSEP",
        @"HasSpringBoard",
        @"HasThinBezel",
        @"HighestSupportedVideoMode",
        @"HomeButtonType",
        @"IDAMCapability",
        @"IcefallInRestrictedMode",
        @"Image4Supported",
        @"IsEmulatedDevice",
        @"IsLargeFormatPhone",
        @"IsPwrOpposedVol",
        @"IsSimulator",
        @"IsUIBuild",
        @"LaunchTimeLimitScaleSupported",
        @"LisaCapability",
        @"MainDisplayRotation",
        @"MaxH264PlaybackLevel",
        @"MaximumScreenScale",
        @"MedusaFloatingLiveAppCapability",
        @"MedusaOverlayAppCapability",
        @"MedusaPIPCapability",
        @"MedusaPinnedAppCapability",
        @"MicrophoneCount",
        @"MinimumSupportediTunesVersion",
        @"MixAndMatchPrevention",
        @"MobileDeviceMinimumVersion",
        @"MonarchLowEndHardware",
        @"MusicStore",
        @"N78aHack",
        @"NFCRadioCalibrationDataPresent",
        @"NavajoFusingState",
        @"OLEDDisplay",
        @"OfflineDictationCapability",
        @"OpenGLESVersion",
        @"PanoramaCameraCapability",
        @"PearlIDCapability",
        @"PeekUICapability",
        @"PhosphorusCapability",
        @"PhotoCapability",
        @"PhotoSharingCapability",
        @"PhotosPostEffectsCapability",
        @"PipelinedStillImageProcessingCapability",
        @"PlatinumCapability",
        @"ProductVersion",
        @"RFExposureSeparationDistance",
        @"RearCameraCapability",
        @"RearFacingCamera60fpsVideoCaptureCapability",
        @"RearFacingCameraAutoHDRCapability",
        @"RearFacingCameraBurstCapability",
        @"RearFacingCameraHDRCapability",
        @"RearFacingCameraHDROnCapability",
        @"RearFacingCameraHFRCapability",
        @"RearFacingCameraHFRVideoCapture1080pMaxFPS",
        @"RearFacingCameraHFRVideoCapture720pMaxFPS",
        @"RearFacingCameraMaxVideoZoomFactor",
        @"RearFacingCameraStillDurationForBurst",
        @"RearFacingCameraVideoCapture1080pMaxFPS",
        @"RearFacingCameraVideoCapture4kMaxFPS",
        @"RearFacingCameraVideoCapture720pMaxFPS",
        @"RearFacingCameraVideoCaptureFPS",
        @"RearFacingTelephotoCameraCapability",
        @"RegionalBehaviorChinaBrick",
        @"RegionalBehaviorEUVolumeLimit",
        @"RegionalBehaviorGB18030",
        @"RegionalBehaviorGoogleMail",
        @"RegionalBehaviorNTSC",
        @"RegionalBehaviorNoPasscodeLocationTiles",
        @"RegionalBehaviorNoVOIP",
        @"RegionalBehaviorNoWiFi",
        @"RegionalBehaviorShutterClick",
        @"RegionalBehaviorValid",
        @"RegionalBehaviorVolumeLimit",
        @"RenderWideGamutImagesAtDisplayTime",
        @"RendersLetterPressSlowly",
        @"RestoreOSBuild",
        @"RotateToWakeStatus",
        @"SBAllowSensitiveUI",
        @"SBCanForceDebuggingInfo",
        @"ScreenRecorderCapability",
        @"SecureElement",
        @"ShouldHactivate",
        @"SiKACapability",
        @"SigningFuse",
        @"SiliconBringupBoard",
        @"SiriOfflineCapability",
        @"Skey",
        @"SoftwareBundleVersion",
        @"SoftwareDimmingAlpha",
        @"SphereCapability",
        @"StarkCapability",
        @"SupportsBurninMitigation",
        @"SupportsEDUMU",
        @"SupportsForceTouch",
        @"SupportsIrisCapture",
        @"SupportsLowPowerMode",
        @"SupportsPerseus",
        @"SupportsRotateToWake",
        @"SupportsSOS",
        @"SupportsSSHBButtonType",
        @"SupportsTouchRemote",
        @"TimeSyncCapability",
        @"TouchDelivery120Hz",
        @"UIBackgroundQuality",
        @"UIParallaxCapability",
        @"UIProceduralWallpaperCapability",
        @"UIReachability",
        @"VibratorCapability",
        @"WAGraphicQuality",
        @"WLANBkgScanCache",
        @"WifiChipset",
        @"WirelessChargingCapability",
        @"accelerometer",
        @"accessibility",
        @"additional-text-tones",
        @"airDropRestriction",
        @"airplay-mirroring",
        @"all-features",
        @"ambient-light-sensor",
        @"any-telephony",
        @"applicationInstallation",
        @"arkit",
        @"arm64",
        @"armv6",
        @"armv7",
        @"armv7s",
        @"assistant",
        @"auto-focus-camera",
        @"bluetooth",
        @"bluetooth-le",
        @"camera-flash",
        @"camera-front-flash",
        @"cameraRestriction",
        @"cellular-data",
        @"contains-cellular-radio",
        @"data-plan",
        @"delay-sleep-for-headset-click",
        @"dictation",
        @"display-mirroring",
        @"displayport",
        @"encode-aac",
        @"encrypted-data-partition",
        @"enforce-googlemail",
        @"enforce-shutter-click",
        @"explicitContentRestriction",
        @"fcc-logos-via-software",
        @"front-facing-camera",
        @"full-6",
        @"gamekit",
        @"gas-gauge-battery",
        @"gps",
        @"green-tea",
        @"gyroscope",
        @"hall-effect-sensor",
        @"haptics",
        @"hardware-keyboard",
        @"hd-video-capture",
        @"hdr-image-capture",
        @"healthkit",
        @"hearingaid-audio-equalization",
        @"hearingaid-low-energy-audio",
        @"hearingaid-power-reduction",
        @"hiccough-interval",
        @"hide-non-default-apps",
        @"hidpi",
        @"homescreen-wallpaper",
        @"hw-encode-snapshots",
        @"hw-snapshots-need-purplegfx",
        @"iAP2Capability",
        @"international-settings",
        @"io-surface-backed-images",
        @"load-thumbnails-while-scrolling",
        @"location-reminders",
        @"location-services",
        @"magnetometer",
        @"main-screen-class",
        @"main-screen-height",
        @"main-screen-orientation",
        @"main-screen-pitch",
        @"main-screen-scale",
        @"main-screen-width",
        @"metal",
        @"microphone",
        @"mms",
        @"multitasking",
        @"multitasking-gestures",
        @"nfc",
        @"nike-ipod",
        @"not-green-tea",
        @"opengles-1",
        @"opengles-2",
        @"opengles-3",
        @"ota-activation",
        @"peer-peer",
        @"personal-hotspot",
        @"photo-adjustments",
        @"photo-stream",
        @"piezo-clicker",
        @"proximity-sensor",
        @"ptp-large-files",
        @"rear-facing-camera",
        @"ringer-switch",
        @"sensitive-ui",
        @"shoebox",
        @"siri-gesture",
        @"sms",
        @"stand-alone-contacts",
        @"still-camera",
        @"telephony",
        @"telephony-maximum-generation",
        @"touch-id",
        @"tv-out-crossfade",
        @"unified-ipod",
        @"venice",
        @"video-camera",
        @"video-stills",
        @"voice-control",
        @"voip",
        @"volume-buttons",
        @"wapi",
        @"wi-fi",
        @"wifi"
    ];

    NSMutableDictionary *answers = [NSMutableDictionary dictionaryWithCapacity:gestaltKeys.count];
    NSNumber *zero = @0;
    for (NSString *query in gestaltKeys) {
        NSObject *answer = MGCopyAnswer(query);
        if ([answer isKindOfClass:[NSString class]]) {
            [answers setObject:answer forKey:query];
        } else if ([answer isKindOfClass:[NSNumber class]] && ![(NSNumber *)answer isEqualToNumber:zero]) {
            [answers setObject:[(NSNumber *)answer stringValue] forKey:query];
        }
    }

    return answers;
}

+ (BOOL)isIpad {
    return MGGetBoolAnswer(@"ipad");
}

@end
